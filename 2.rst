=============================
第2部 基本的なPillowの使い方
=============================

第2部では、より実用的なスクリプト開発向けて、公開されたサードパーティのパッケージを使う方法を学びます。

また、実際にサードパーティのパッケージをインストールし、Python コードから利用してみましょう。

題材とする **Pillow** はサードパーティのパッケージのひとつで、画像処理を行うライブラリです。

pipを使ってみよう
=================

サードパーティパッケージは、
**pip** というコマンドを用いて自分の環境にインストールことができます。
これは、PHPの ``composer`` コマンドやJavaScriptの ``npm`` コマンドに相当します。

pipでインストールできるサードパーティのパッケージは、
**Python Package Index** (PyPI: https://pypi.python.org/pypi) に登録されています。

PyPIには、DjangoやFlaskといったWeb開発のためのフレームワークをはじめ、
numpyなどの数値計算ライブラリやプロビジョニングツールのAnsibleなど、
様々なパッケージが登録されており、pipで簡単にインストールすることができます。

もちろんPillowもPyPIに登録されているのでpipでインストールすることができます。

pipのインストール
-----------------

ではpipはどのようにインストールするのでしょう。

pipのインストール方法はOSによって異なります。

:Ubuntu: get-pip.py
:Windows/OSX: ensurepip

Windows/OSX
~~~~~~~~~~~

実は Windows/OSX の場合、
Pythonをインストールした際にpipも一緒にインストールされています。

以下のコマンドを実行し、pipがインストールされていることを確認してみましょう。

::

  C:\Users\pyconjp> pip --version
  pip 8.1.1 from c:\users\pyconjp\appdata\local\programs\python\python35-32\lib\site-packages (python 3.5)

.. warning::

  ただし、Pythonの公式 (python.org) のインストーラでインストールした場合以外はこの限りではありません。

.. todo:: ensurepip の説明どうしよう

Ubuntu
~~~~~~

Ubuntuにpipをインストールするには、PyPIが配布している ``get-pip.py`` というインストールスクリプトを用います。

以下のコマンドでpipをインストールします。

::

  $ curl https://bootstrap.pypa.io/get-pip.py | sudo python3
  $ pip --version
  pip 8.1.2 from /usr/local/lib/python3.4/dist-packages (python 3.4)


.. caution::

  ``python`` コマンドではなく ``python3`` コマンドを使うことに注意してください。
  ``python`` コマンドを使うと、 Python 2 用に pip がインストールされてしまいます。


pipのバージョン確認
-------------------

次に、pipが正しくインストールされているかを確認しましょう

先ほどと繰り返しになりますが、以下のコマンドを実行してください

::

  $ pip --version
  pip 8.1.2 from /usr/local/lib/python3.4/dist-packages (python 3.4)

この出力はそれぞれ次のような意味です

- ``pip 8.1.2`` pip のバージョン
- ``from /usr/local/lib/python3.4/dist-packages`` pipでインストールされたパッケージが配置されるディレクトリ・フォルダ
- ``(python 3.4)`` pip が動いてるPythonインタプリタのバージョン

出力から、以下のことが確認できれば、無事にpipがインストールできています

- pip のバージョンが 8 以上 (``8.0.0``, ``8.1.2`` など)
- Python のバージョンが 3.4 または 3.5

.. todo:: え！？問題があった！？その時は呼んでください


Pillowをインストールしよう
==========================

.. todo::

   - Pillow is 何
   - Pillow はどういうとき使うの
   - Pillow どうやってインストールするの
   - pipでインストールする

     - 前節だと何インストールするの問題がある
     - 角煮: libjpeg とかいらんの？


画像を読み込んでみよう
======================

.. todo::

  - バイナリモードでのファイルオープン
  - Pillow の import
  - 開いた画像ファイルを Pillow に読み込ませるには

    - Pillow に読み込ませたことを確認するため、
      Pillow の API で画像のサイズとか出してみる


画像を保存してみよう
=====================

.. 書き出すだけだと、内容が薄すぎるかも

.. todo::

  - 開いた画像データをファイルに書き出す


画像を縮小してみよう
====================

.. todo::

  - 画像を縮小するには
  - 画像を開いて縮小して保存するところまで通しで行う
